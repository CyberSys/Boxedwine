#/bin/sh
set -e
emcc -std=c++17 -Wall -Wno-unused-private-field -Wno-unused-variable -Wno-parentheses-equality -Wno-unused-function -I../../include ../../source/sdl/*.cpp ../../source/sdl/emscripten/*.cpp ../../platform/sdl/*.cpp ../../platform/linux/*.cpp ../../source/emulation/cpu/*.cpp ../../source/emulation/cpu/common/*.cpp ../../source/emulation/cpu/normal/*.cpp ../../source/emulation/softmmu/*.cpp ../../source/io/*.cpp ../../source/kernel/*.cpp ../../source/kernel/devs/*.cpp ../../source/kernel/proc/*.cpp ../../source/kernel/sys/*.cpp ../../source/kernel/loader/*.cpp ../../source/util/*.cpp ../../source/opengl/sdl/*.cpp ../../source/opengl/*.cpp -o boxedwine.html -O3 -g2 -DUSE_MMU -s NO_AUTO_NATIVE_LIBRARIES=0 -lGL -s STRICT=0 -s FULL_ES2=1 -I../../lib/gl4es/include -L../../lib/gl4es/build/emscripten -s ERROR_ON_UNDEFINED_SYMBOLS=0 -s DISABLE_EXCEPTION_CATCHING=0 -s SUPPORT_LONGJMP=1 -DBOXEDWINE_HAS_SETJMP "-DGLH=<GL/gl.h>" -DBOXEDWINE_OPENGL_SDL -s USE_SDL=2 -DSDL2 -DBOXEDWINE_DISABLE_UI -s TOTAL_MEMORY=536870912 --shell-file shellfs.html -s DEFAULT_LIBRARY_FUNCS_TO_INCLUDE='["$ERRNO_CODES"]' -s EXPORTED_RUNTIME_METHODS='["addRunDependency", "removeRunDependency"]'
./webgl_hacks.py
